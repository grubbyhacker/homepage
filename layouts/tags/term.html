{{ define "content" }}

<div class="term">
  <header class="term__header">
    <h1 class="term__title">{{ .Title }}</h1>
    {{ with .Params.tagline }}
      <p class="term__tagline">{{ . }}</p>
    {{ end }}
  </header>

  <hr class="term__rule"/>

  {{ partial "article-count.html" . }}

  {{ if .Content }}
    <div class="term__intro">
      {{ .Content }}
    </div>
  {{ else if .Description }}
    <div class="term__intro">
      <p>{{ .Description }}</p>
    </div>
  {{ end }}

  <section class="term__posts">
    {{ range .Pages.ByDate.Reverse }}
      <article class="term-post">
        {{ with .Params.tags }}
          <div class="tag-list tag-list--compact">
            {{ range . }}
              {{ partial "tag-pill.html" . }}
            {{ end }}
          </div>
        {{ end }}
        <h2 class="term-post__title">
          <a href="{{ .RelPermalink }}">{{ .Title }}</a>
        </h2>

        {{ $desc := "" }}
        {{ if .Params.description }}
          {{ $desc = .Params.description }}
        {{ else if .Summary }}
          {{ $desc = (.Summary | plainify) }}
        {{ else if .Content }}
          {{ $desc = (.Plain | truncate 180) }}
        {{ end }}

        {{ if $desc }}
          <p class="term-post__desc">{{ $desc }}</p>
        {{ end }}
      </article>
    {{ end }}

    {{ if not (gt (len .Pages) 0) }}
      <p class="term__empty">No posts yet.</p>
    {{ end }}
  </section>
</div>

{{ end }}
